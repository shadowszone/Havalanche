<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Connect Wallet - Havalanche</title>
  <script src="https://cdn.jsdelivr.net/npm/web3modal@1.9.3/dist/index.bundle.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.6.6/dist/umd/index.min.js"></script>
</head>
<body>
  <h1>Connect Wallet</h1>
  <button id="connectWallet">Connect Wallet</button>
  
  <script>
    // Web3Modal setup
    const providerOptions = {
      walletconnect: {
        package: WalletConnectProvider, // WalletConnect provider package
        options: {
          rpc: {
            43114: "https://api.avax.network/ext/bc/C/rpc" // Avalanche C-Chain RPC URL
          },
          network: "avalanche",
        }
      },
      // Add other wallet providers here (MetaMask, Fortmatic, etc.)
    };

    const web3Modal = new Web3Modal({
      cacheProvider: true, // Cache the provider to reconnect
      providerOptions, // Available provider options
    });

    const connectButton = document.getElementById('connectWallet');
    
    connectButton.addEventListener('click', async () => {
      try {
        // Open Web3Modal
        const instance = await web3Modal.connect();
        const web3 = new Web3(instance);  // Web3 instance

        // Log the connected accounts
        const accounts = await web3.eth.getAccounts();
        console.log('Connected accounts:', accounts);

        // Update UI or send the data to Telegram
        alert(`Connected: ${accounts[0]}`);

      } catch (error) {
        console.error('Connection failed:', error);
        alert("Failed to connect wallet. Please try again.");
      }
    });
  </script>
</body>
</html>
